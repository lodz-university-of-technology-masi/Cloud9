package com.serverless.dal;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAttribute;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAutoGeneratedKey;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBHashKey;
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBRangeKey;
import com.fasterxml.jackson.databind.JsonNode;

public class Form {
	
	 private String id;
	 private String name;
	 private String creationDate;
	 
	 private Logger logger = LogManager.getLogger(this.getClass());
	 
	 public Form() {
		logger.info("Call Form::constructor");
		this.id = null;
		this.name = null;
		this.creationDate = null;
	}
	 
	 public Form(JsonNode body) {
		 	logger.info("Call Form constructor(JsonNode)");
			this.id = body.get("id").asText();
			this.name = body.get("name").asText();
			this.creationDate = body.get("creationDate").asText();
		}
	
	 
	 public void update(JsonNode body) {
		 logger.info("Call Form::update(" + body + ")");
		 JsonNode newName = body.get("name");
		 JsonNode newCreationDate = body.get("creationDate");
		 
		 if(newName != null) {
			 this.setName(newName.asText());
		 }
		 else {
			 logger.warn("Name is null");
		 }
		 
		 if(newCreationDate != null) {
			 this.setCreationDate(newCreationDate.asText());
		 }
		 else {
			 logger.warn("CreationDate is null");
		 }
	 }
	 
	 	@DynamoDBHashKey(attributeName = "id")
	    @DynamoDBAutoGeneratedKey
	    public String getId() {
	 		logger.info("Call Form::getId() -> " + this.id);
	 		return this.id;
	    }
	 	
	    public void setId(String id) {
	    	logger.info("Call Form::setId(" + id + ")");
	        this.id = id;
	    }

	    @DynamoDBAttribute(attributeName = "name")
	    public String getName() {
	    	logger.info("Call Form::getName() -> " + this.name);
	    	return this.name;
	    }
	    
	    public void setName(String name) {
	    	logger.info("Call Form::setName(" + name + ")");
	    	this.name = name;
	    }

	    @DynamoDBAttribute(attributeName = "creationDate")
	    public String getCreationDate() {
	    	logger.info("Call Form::getCreationDate() -> " + this.creationDate);
	    	return this.creationDate;
	    }
	    
	    public void setCreationDate(String creationDate) {
	    	logger.info("Call Form::setCreationDate(" + creationDate + ")");
	    	this.creationDate = creationDate;
	    }
	    
	    @Override
		public String toString() {
			return "Form [getId()=" + this.getId() + ", getName()=" + this.getName() + ", getCreationDate()=" + this.getCreationDate() + "]";
		}

}
